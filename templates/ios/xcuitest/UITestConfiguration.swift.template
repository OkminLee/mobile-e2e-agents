//
//  UITestConfiguration.swift
//  {{PROJECT_NAME}}UITests
//
//  Configuration builder for UI test launch arguments and environment
//  Generated by mobile-e2e-agents
//

import Foundation

/// Builder for configuring UI test launch arguments and environment variables
///
/// Usage:
/// ```swift
/// let config = UITestConfiguration()
///     .disableAnimations()
///     .resetState()
///     .skipOnboarding()
///     .setInitialState("alarmList")
///
/// app.launchArguments = config.launchArguments()
/// app.launchEnvironment = config.launchEnvironment()
/// ```
struct UITestConfiguration {

    // MARK: - Launch Arguments

    private var arguments: Set<String> = ["-UITesting"]

    // MARK: - Environment Variables

    private var environment: [String: String] = [:]

    // MARK: - Builder Methods

    /// Enable UI testing mode (default: enabled)
    @discardableResult
    mutating func enableUITesting() -> Self {
        arguments.insert("-UITesting")
        return self
    }

    /// Disable animations for faster test execution
    @discardableResult
    mutating func disableAnimations() -> Self {
        arguments.insert("-DisableAnimations")
        return self
    }

    /// Reset app state before test
    @discardableResult
    mutating func resetState() -> Self {
        arguments.insert("-ResetState")
        return self
    }

    /// Skip onboarding flow
    @discardableResult
    mutating func skipOnboarding() -> Self {
        arguments.insert("-SkipOnboarding")
        return self
    }

    /// Setup test data (mock alarms, etc.)
    @discardableResult
    mutating func setupTestData() -> Self {
        arguments.insert("-SetupTestData")
        return self
    }

    /// Disable network requests (use mock data)
    @discardableResult
    mutating func disableNetwork() -> Self {
        arguments.insert("-DisableNetwork")
        return self
    }

    /// Disable location services
    @discardableResult
    mutating func disableLocationServices() -> Self {
        arguments.insert("-DisableLocationServices")
        return self
    }

    /// Set initial screen state
    @discardableResult
    mutating func setInitialState(_ state: String) -> Self {
        environment["UITest_InitialState"] = state
        return self
    }

    /// Set mock network delay in milliseconds
    @discardableResult
    mutating func setMockNetworkDelay(_ delayMs: Int) -> Self {
        environment["UITest_MockNetworkDelay"] = String(delayMs)
        return self
    }

    /// Set test locale
    @discardableResult
    mutating func setLocale(_ locale: String) -> Self {
        environment["UITest_Locale"] = locale
        return self
    }

    /// Set subscription state for testing
    @discardableResult
    mutating func setSubscriptionState(_ state: SubscriptionState) -> Self {
        environment["UITest_SubscriptionState"] = state.rawValue
        return self
    }

    /// Add custom launch argument
    @discardableResult
    mutating func addArgument(_ argument: String) -> Self {
        arguments.insert(argument)
        return self
    }

    /// Add custom environment variable
    @discardableResult
    mutating func addEnvironment(key: String, value: String) -> Self {
        environment[key] = value
        return self
    }

    // MARK: - Output

    /// Get launch arguments array
    func launchArguments() -> [String] {
        Array(arguments)
    }

    /// Get launch environment dictionary
    func launchEnvironment() -> [String: String] {
        environment
    }
}

// MARK: - Subscription State

/// Subscription state for testing ad visibility and premium features
enum SubscriptionState: String {
    case free = "free"
    case subscribed = "subscribed"
    case trial = "trial"
}

// MARK: - Initial State

/// Common initial states for navigation
enum InitialState: String {
    case home = "home"
    case alarmList = "alarmList"
    case alarmEditor = "alarmEditor"
    case settings = "settings"
    case today = "today"

    // Add more as needed for your app
}
